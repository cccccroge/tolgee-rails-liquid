var e;function _mergeNamespaces(e,t){for(var n=0;n<t.length;n++){const r=t[n];if(typeof r!=="string"&&!Array.isArray(r))for(const t in r)if(t!=="default"&&!(t in e)){const n=Object.getOwnPropertyDescriptor(r,t);n&&Object.defineProperty(e,t,n.get?n:{enumerable:true,get:()=>r[t]})}}return Object.freeze(Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}))}function isPromise(e){return Boolean(e&&typeof e.then==="function")}function valueOrPromise(e,t){return isPromise(e)?Promise.resolve(e).then(t):t(e)}function handleRegularOrAsyncErr(e,t,n){function handle(n){const r=t(n);e.emit(r);console.error(r);throw r}try{const e=n();return isPromise(e)?e.catch(handle):e}catch(e){handle(e)}}function missingOptionError(e){const t=(Array.isArray(e)?e:[e]).map((e=>`'${e}'`));const n=t.slice(-2).join(" or ");const r=t.slice(0,-2);const a=[...r,n].join(", ");return`Tolgee: You need to specify ${a} option`}function isObject(e){return typeof e==="object"&&!Array.isArray(e)&&e!==null}function getFallback(e){return typeof e==="string"?[e]:Array.isArray(e)?e:void 0}function getFallbackArray(e){return getFallback(e)||[]}function getFallbackFromStruct(e,t){return isObject(t)?getFallbackArray(t===null||t===void 0?void 0:t[e]):getFallbackArray(t)}function unique(e){return Array.from(new Set(e))}function sanitizeUrl(e){return e?e.replace(/\/+$/,""):e}function getErrorMessage(e){return typeof e==="string"?e:typeof(e===null||e===void 0?void 0:e.message)==="string"?e.message:void 0}const defaultFetchFunction=(e,t)=>fetch(e,t);const createFetchFunction=(e=defaultFetchFunction)=>(t,n)=>e(t,Object.assign(Object.assign({},n),{headers:Object.assign({"X-Tolgee-SDK-Type":"JS","X-Tolgee-SDK-Version":"5.26.0"},n===null||n===void 0?void 0:n.headers)}));function EventEmitter(e){let t=[];return Object.freeze({listen(e){const handlerWrapper=t=>{e(t)};t.push(handlerWrapper);return{unsubscribe(){t=t.filter((e=>handlerWrapper!==e))}}},emit(n){e()&&t.forEach((e=>e({value:n})))}})}function EventEmitterSelective(e,t,n){const r=new Set;const a=new Set;function callHandlers(e){const n=new Set(t());a.forEach((t=>{const r=e===void 0||(e===null||e===void 0?void 0:e.findIndex((e=>n.has(e)||t.namespaces.has(e))))!==-1;r&&t.fn({value:void 0})}))}let o=[];function solveQueue(){if(o.length===0)return;const e=o;o=[];r.forEach((e=>{e({value:void 0})}));let t=new Set;e.forEach((e=>{e===void 0?t=void 0:t!==void 0&&e.forEach((e=>t.add(e)))}));const n=t?Array.from(t.keys()):void 0;callHandlers(n)}return Object.freeze({emit(t,n){if(e()){o.push(t);n?setTimeout(solveQueue,0):solveQueue()}},listen(e){r.add(e);const t={unsubscribe:()=>{r.delete(e)}};return t},listenSome(e){const t={fn:t=>{e(t)},namespaces:new Set};a.add(t);const r={unsubscribe:()=>{a.delete(t)},subscribeNs:e=>{getFallbackArray(e).forEach((e=>t.namespaces.add(e)));e===void 0&&t.namespaces.add(n());return r}};return r}})}function Events(e,t){let n=true;function isActive(){return n}const r=Object.freeze({onPendingLanguageChange:EventEmitter(isActive),onLanguageChange:EventEmitter(isActive),onLoadingChange:EventEmitter(isActive),onFetchingChange:EventEmitter(isActive),onInitialLoaded:EventEmitter(isActive),onRunningChange:EventEmitter(isActive),onCacheChange:EventEmitter(isActive),onUpdate:EventEmitterSelective(isActive,e,t),onPermanentChange:EventEmitter(isActive),onError:EventEmitter(isActive),setEmitterActive(e){n=e},on:(e,t)=>{switch(e){case"pendingLanguage":return r.onPendingLanguageChange.listen(t);case"language":return r.onLanguageChange.listen(t);case"loading":return r.onLoadingChange.listen(t);case"fetching":return r.onFetchingChange.listen(t);case"initialLoad":return r.onInitialLoaded.listen(t);case"running":return r.onRunningChange.listen(t);case"cache":return r.onCacheChange.listen(t);case"update":return r.onUpdate.listen(t);case"permanentChange":return r.onPermanentChange.listen(t);case"error":return r.onError.listen(t)}}});r.onInitialLoaded.listen((()=>r.onUpdate.emit()));r.onLanguageChange.listen((()=>r.onUpdate.emit()));r.onCacheChange.listen((({value:e})=>r.onUpdate.emit([e.namespace],true)));return r}class RecordFetchError extends Error{constructor(e,t,n=false){const{language:r,namespace:a}=e;super(`Tolgee: Failed to fetch record for "${r}"${a&&` and "${a}"`}`);this.cause=t;this.isDev=n;this.name="RecordFetchError";this.language=r;this.namespace=a}}class LanguageDetectorError extends Error{constructor(e,t){super(e);this.cause=t;this.name="LanguageDetectorError"}}class LanguageStorageError extends Error{constructor(e,t){super(e);this.cause=t;this.name="LanguageStorageError"}}const flattenTranslations=e=>{const t=new Map;Object.entries(e).forEach((([e,n])=>{n!==void 0&&n!==null&&(typeof n!=="object"?t.set(e,n):flattenTranslations(n).forEach(((n,r)=>{t.set(e+"."+r,n)})))}));return t};const decodeCacheKey=e=>{const[t,...n]=e.split(":");const r=n.join(":");return{language:t,namespace:r||""}};const encodeCacheKey=({language:e,namespace:t})=>t?`${e}:${t}`:e;function Cache(e,t,n,r,a,o,i){const s=new Map;const c=new Map;let l={};let u=0;function addRecordInternal(t,n,r){const a=encodeCacheKey(t);c.set(a,{data:flattenTranslations(n),version:r});e.onCacheChange.emit(t)}async function fetchProd(n){let r;const a=l[encodeCacheKey(n)];typeof a==="function"&&(r=a());r||(r=t(n));return isPromise(r)?r===null||r===void 0?void 0:r.catch((t=>{const r=new RecordFetchError(n,t);e.onError.emit(r);console.error(r);throw r})):r}async function fetchData(t,r){let a;if(r)try{a=await n(t)}catch(n){const r=new RecordFetchError(t,n,true);e.onError.emit(r);console.warn(r)}a||(a=await fetchProd(t));return a}const d=Object.freeze({addStaticData(e){if(e){l=Object.assign(Object.assign({},l),e);Object.entries(e).forEach((([e,t])=>{if(typeof t!=="function"){const n=decodeCacheKey(e);const r=c.get(e);r&&r.version!==0||addRecordInternal(n,t,0)}}))}},invalidate(){s.clear();u+=1},addRecord(e,t){addRecordInternal(e,t,u)},exists(e,t=false){const n=c.get(encodeCacheKey(e));return n&&t?n.version===u:Boolean(n)},getRecord(e){var t;return(t=c.get(encodeCacheKey(r(e))))===null||t===void 0?void 0:t.data},getTranslation(e,t){var n;return(n=c.get(encodeCacheKey(e)))===null||n===void 0?void 0:n.data.get(t)},getTranslationNs(e,t,n){var r;for(const a of e)for(const e of t){const t=(r=c.get(encodeCacheKey({language:e,namespace:a})))===null||r===void 0?void 0:r.data.get(n);if(t!==void 0&&t!==null)return[a]}return unique(e)},getTranslationFallback(e,t,n){var r;for(const a of e)for(const e of t){const t=(r=c.get(encodeCacheKey({language:e,namespace:a})))===null||r===void 0?void 0:r.data.get(n);if(t!==void 0&&t!==null)return t}},changeTranslation(t,n,r){var a;const o=(a=c.get(encodeCacheKey(t)))===null||a===void 0?void 0:a.data;o===null||o===void 0?void 0:o.set(n,r);e.onCacheChange.emit(Object.assign(Object.assign({},t),{key:n}))},isFetching(e){if(a())return true;if(e===void 0)return s.size>0;const t=getFallbackArray(e);return Boolean(Array.from(s.keys()).find((e=>t.includes(decodeCacheKey(e).namespace))))},isLoading(e,t){const n=getFallbackArray(t);return Boolean(a()||Array.from(s.keys()).find((t=>{const r=decodeCacheKey(t);return(!n.length||n.includes(r.namespace))&&!d.exists({namespace:r.namespace,language:e})})))},async loadRecords(e,t){const n=e.map((e=>{const n=r(e);const a=encodeCacheKey(n);const o=s.get(a);if(o)return{new:false,promise:o,keyObject:n,cacheKey:a};const i=fetchData(n,t)||Promise.resolve(void 0);s.set(a,i);return{new:true,promise:i,keyObject:n,cacheKey:a}}));o.notify();i.notify();const a=await Promise.all(n.map((e=>e.promise)));n.forEach(((e,t)=>{const n=s.get(e.cacheKey)!==e.promise;if(e.new&&!n){s.delete(e.cacheKey);const n=a[t];n?d.addRecord(e.keyObject,n):d.getRecord(e.keyObject)||d.addRecord(e.keyObject,{})}}));o.notify();i.notify();return n.map((e=>d.getRecord(e.keyObject)))},getAllRecords(){const e=Array.from(c.entries());return e.map((([e,t])=>Object.assign(Object.assign({},decodeCacheKey(e)),{data:t.data})))}});return d}function __rest(e,t){var n={};for(var r in e)Object.prototype.hasOwnProperty.call(e,r)&&t.indexOf(r)<0&&(n[r]=e[r]);if(e!=null&&typeof Object.getOwnPropertySymbols==="function"){var a=0;for(r=Object.getOwnPropertySymbols(e);a<r.length;a++)t.indexOf(r[a])<0&&Object.prototype.propertyIsEnumerable.call(e,r[a])&&(n[r[a]]=e[r[a]])}return n}const t={tagAttributes:{textarea:["placeholder"],input:["value","placeholder"],img:["alt"],"*":["aria-label","title"]},restrictedElements:["script","style"],highlightKeys:["Alt"],highlightColor:"rgb(255, 0, 0)",highlightWidth:5,inputPrefix:"%-%tolgee:",inputSuffix:"%-%",passToParent:["option","optgroup"],fullKeyEncode:false};const n="invalid";const r="https://app.tolgee.io";const DEFAULT_MISSING_TRANSLATION=({key:e})=>e;const a={defaultNs:"",observerOptions:t,observerType:"invisible",onFormatError:n,apiUrl:r,fetch:createFetchFunction(),onTranslationMissing:DEFAULT_MISSING_TRANSLATION};const combineOptions=(...e)=>{let t={};e.forEach((e=>{t=Object.assign(Object.assign(Object.assign({},t),e),{observerOptions:Object.assign(Object.assign({},t.observerOptions),e===null||e===void 0?void 0:e.observerOptions)})}));return t};function initState(e,t){const n=combineOptions(a,t===null||t===void 0?void 0:t.initialOptions,e);n.apiUrl=sanitizeUrl(n.apiUrl);(e===null||e===void 0?void 0:e.fetch)&&(n.fetch=createFetchFunction(e.fetch));return{initialOptions:n,activeNamespaces:(t===null||t===void 0?void 0:t.activeNamespaces)||new Map,language:t===null||t===void 0?void 0:t.language,pendingLanguage:t===null||t===void 0?void 0:t.language,isInitialLoading:false,isRunning:false}}function Plugins(e,t,r,a,o,i,s,c){const l={ui:void 0};const u={formatters:[],finalFormatter:void 0,observer:void 0,devBackend:void 0,backends:[],ui:void 0,languageDetector:void 0,languageStorage:void 0};const onClick=async({keysAndDefaults:e,target:t})=>{var n;const r=e.map((({key:e,ns:t,defaultValue:n})=>({key:e,defaultValue:n,fallbackNamespaces:a(t),namespace:o({key:e,ns:t})[0],translation:i({key:e,ns:t})})));(n=u.ui)===null||n===void 0?void 0:n.handleElementClick(r,t)};const findPositions=(e,t)=>{var n;return((n=u.observer)===null||n===void 0?void 0:n.findPositions(e,t))||[]};function translate(e){const t=i({key:e.key,ns:e.ns});return d.formatTranslation(Object.assign(Object.assign({},e),{translation:t,formatEnabled:true}))}function getCommonProps(){return{fetch:t().fetch}}function setObserver(e){u.observer=e===null||e===void 0?void 0:e()}function hasObserver(){return Boolean(u.observer)}function addFormatter(e){e&&u.formatters.push(e)}function setFinalFormatter(e){u.finalFormatter=e}function setUi(e){l.ui=e}function hasUi(){return Boolean(l.ui)}function setLanguageStorage(e){u.languageStorage=e}function setLanguageDetector(e){u.languageDetector=e}function storageLoadLanguage(){return handleRegularOrAsyncErr(c.onError,(e=>new LanguageStorageError("Tolgee: Failed to load language",e)),(()=>{var e;return(e=u.languageStorage)===null||e===void 0?void 0:e.getLanguage(getCommonProps())}))}function detectLanguage(){if(!u.languageDetector)return;const e=r();return handleRegularOrAsyncErr(c.onError,(e=>new LanguageDetectorError("Tolgee: Failed to detect language",e)),(()=>{var t;return(t=u.languageDetector)===null||t===void 0?void 0:t.getLanguage(Object.assign({availableLanguages:e},getCommonProps()))}))}function addBackend(e){e&&u.backends.push(e)}function setDevBackend(e){u.devBackend=e}function addPlugin(e,t){const n=Object.freeze({setFinalFormatter:setFinalFormatter,addFormatter:addFormatter,setObserver:setObserver,hasObserver:hasObserver,setUi:setUi,hasUi:hasUi,setDevBackend:setDevBackend,addBackend:addBackend,setLanguageDetector:setLanguageDetector,setLanguageStorage:setLanguageStorage});t(e,n)}const d=Object.freeze({addPlugin:addPlugin,findPositions:findPositions,run(){var e,n;const{apiKey:r,apiUrl:a,projectId:o,observerOptions:i}=t();u.ui=(e=l.ui)===null||e===void 0?void 0:e.call(l,{apiKey:r,apiUrl:a,projectId:o,highlight:d.highlight,changeTranslation:s,findPositions:findPositions,onPermanentChange:e=>c.onPermanentChange.emit(e)});(n=u.observer)===null||n===void 0?void 0:n.run({mouseHighlight:true,options:i,translate:translate,onClick:onClick})},stop(){var e;u.ui=void 0;(e=u.observer)===null||e===void 0?void 0:e.stop()},getLanguageStorage(){return u.languageStorage},getInitialLanguage(){const e=r();const t=storageLoadLanguage();return valueOrPromise(t,(t=>e&&!e.includes(t)||!t?detectLanguage():t))},setStoredLanguage(e){return handleRegularOrAsyncErr(c.onError,(e=>new LanguageStorageError("Tolgee: Failed to store language",e)),(()=>{var t;return(t=u.languageStorage)===null||t===void 0?void 0:t.setLanguage(e,getCommonProps())}))},getDevBackend(){return u.devBackend},getBackendRecord:async({language:e,namespace:t})=>{for(const n of u.backends){const r=await n.getRecord(Object.assign({language:e,namespace:t},getCommonProps()));if(r!==void 0)return r}},getBackendDevRecord:async({language:e,namespace:n})=>{var r;const{apiKey:a,apiUrl:o,projectId:i}=t();return(r=u.devBackend)===null||r===void 0?void 0:r.getRecord(Object.assign({apiKey:a,apiUrl:o,projectId:i,language:e,namespace:n},getCommonProps()))},getLanguageDetector(){return u.languageDetector},retranslate(){var e;(e=u.observer)===null||e===void 0?void 0:e.retranslate()},highlight:(e,t)=>{var n,r;return((r=(n=u.observer)===null||n===void 0?void 0:n.highlight)===null||r===void 0?void 0:r.call(n,e,t))||{unhighlight(){}}},unwrap(e){var t;return u.observer?(t=u.observer)===null||t===void 0?void 0:t.unwrap(e):{text:e,keys:[]}},wrap(e){var t;return u.observer?(t=u.observer)===null||t===void 0?void 0:t.wrap(e):e.translation},hasDevBackend(){return Boolean(d.getDevBackend())},formatTranslation(r){var a;var{formatEnabled:o}=r,i=__rest(r,["formatEnabled"]);const{key:s,translation:c,defaultValue:l,noWrap:d,params:f,ns:m,orEmpty:b}=i;const y=c!==null&&c!==void 0?c:l;let E="";c!==void 0&&c!==null||(E=t().onTranslationMissing(i));let L=y!==null&&y!==void 0?y:b?"":E;const A=e();const k=o||!((a=u.observer)===null||a===void 0?void 0:a.outputNotFormattable);const wrap=e=>u.observer&&!d?u.observer.wrap({key:s,translation:e,defaultValue:l,params:f,ns:m}):e;L=wrap(L);try{if(y&&A&&k)for(const e of u.formatters)L=e.format({translation:L,language:A,params:f});u.finalFormatter&&y&&A&&k&&(L=u.finalFormatter.format({translation:L,language:A,params:f}))}catch(e){console.error(e);const r=getErrorMessage(e)||n;const a=t().onFormatError;const o=typeof a;L=o==="string"?a:o==="function"?a(r,i):n;L=wrap(L)}return L}});return d}const ValueObserver=(e,t,n)=>{let r=e;return Object.freeze({init(e){r=e},notify(){const e=t();r!==e&&n(e);r=e}})};function State(e,t,n){let r=initState();let a;const o=Object.freeze({init(e){r=initState(e,r)},isRunning(){return r.isRunning},setRunning(e){if(r.isRunning!==e){r.isRunning=e;n.emit(e)}},isInitialLoading(){return r.isInitialLoading},setInitialLoading(e){r.isInitialLoading=e},getLanguage(){return r.language||r.initialOptions.language},setLanguage(t){if(r.language!==t){r.language=t;e.emit(t)}},getPendingLanguage(){return r.pendingLanguage||o.getLanguage()},setPendingLanguage(e){if(r.pendingLanguage!==e){r.pendingLanguage=e;t.emit(e)}},getInitialOptions(){return Object.assign(Object.assign({},r.initialOptions),a)},addActiveNs(e){const t=getFallbackArray(e);t.forEach((e=>{const t=r.activeNamespaces.get(e);t!==void 0?r.activeNamespaces.set(e,t+1):r.activeNamespaces.set(e,1)}))},removeActiveNs(e){const t=getFallbackArray(e);t.forEach((e=>{const t=r.activeNamespaces.get(e);t!==void 0&&t>1?r.activeNamespaces.set(e,t-1):r.activeNamespaces.delete(e)}))},getRequiredNamespaces(){return unique([...r.initialOptions.ns||[r.initialOptions.defaultNs],...getFallbackArray(r.initialOptions.fallbackNs),...r.activeNamespaces.keys()])},getFallbackLangs(e){const t=e||o.getLanguage();return t?unique([t,...getFallbackFromStruct(t,r.initialOptions.fallbackLanguage)]):[]},getFallbackNs(){return getFallbackArray(r.initialOptions.fallbackNs)},getDefaultNs(e){return e===void 0?r.initialOptions.defaultNs:e},getAvailableLanguages(){if(r.initialOptions.availableLanguages)return r.initialOptions.availableLanguages;if(r.initialOptions.staticData){const e=Object.keys(r.initialOptions.staticData).map((e=>decodeCacheKey(e).language));return Array.from(new Set(e))}},withDefaultNs(e){return{namespace:e.namespace===void 0?o.getInitialOptions().defaultNs:e.namespace,language:e.language}},overrideCredentials(e){a=e?Object.assign(Object.assign({},e),{apiUrl:sanitizeUrl(e.apiUrl)}):void 0}});return o}function parseCombinedOptions(e){var{ns:t,noWrap:n,orEmpty:r,params:a,language:o}=e,i=__rest(e,["ns","noWrap","orEmpty","params","language"]);const s={ns:t,noWrap:n,orEmpty:r,language:o};return Object.assign(Object.assign({},s),{params:Object.assign({},i)})}const getTranslateProps=(e,...t)=>{let n={};let r;if(typeof e==="object")n=e;else{n.key=e;if(typeof t[0]==="string"){n.defaultValue=t[0];r=t[1]}else typeof t[0]==="object"&&(r=t[0])}r&&(n=Object.assign(Object.assign({},parseCombinedOptions(r)),n));return n};function Controller({options:e}){const t=Events(getFallbackNs,getDefaultNs);const n=ValueObserver(false,(()=>i.isFetching()),t.onFetchingChange.emit);const r=ValueObserver(false,(()=>c.isLoading()),t.onLoadingChange.emit);const a=State(t.onLanguageChange,t.onPendingLanguageChange,t.onRunningChange);const o=Plugins(a.getLanguage,a.getInitialOptions,a.getAvailableLanguages,getDefaultAndFallbackNs,getTranslationNs,getTranslation,changeTranslation,t);const i=Cache(t,o.getBackendRecord,o.getBackendDevRecord,a.withDefaultNs,a.isInitialLoading,n,r);e&&init(e);let s;t.onUpdate.listen((()=>{a.isRunning()&&o.retranslate()}));function getFallbackNs(){return a.getFallbackNs()}function getDefaultNs(e){return a.getDefaultNs(e)}function getDefaultAndFallbackNs(e){return[...getFallbackArray(getDefaultNs(e)),...getFallbackNs()]}function getRequiredNamespaces(e){return[...getFallbackArray(e!==null&&e!==void 0?e:getDefaultNs()),...a.getRequiredNamespaces()]}function changeTranslation(e,t,n){const r=a.withDefaultNs(e);const o=i.getTranslation(r,t);i.changeTranslation(r,t,n);return{revert(){i.changeTranslation(r,t,o)}}}function init(e){a.init(e);i.addStaticData(a.getInitialOptions().staticData)}function getRequiredRecords(e,t){const n=a.getFallbackLangs(e);const r=getRequiredNamespaces(t);const o=[];n.forEach((e=>{r.forEach((t=>{i.exists({language:e,namespace:t},true)||o.push({language:e,namespace:t})}))}));return o}function loadRequiredRecords(e,t){const n=getRequiredRecords(e,t);if(n.length)return valueOrPromise(c.loadRecords(n),(()=>{}))}function getTranslationNs({key:e,ns:t}){const n=a.getFallbackLangs();const r=getDefaultAndFallbackNs(t!==null&&t!==void 0?t:void 0);return i.getTranslationNs(r,n,e)}function getTranslation({key:e,ns:t,language:n}){const r=getDefaultAndFallbackNs(t!==null&&t!==void 0?t:void 0);const o=a.getFallbackLangs(n);return i.getTranslationFallback(r,o,e)}function loadInitial(){const e=valueOrPromise(initializeLanguage(),(()=>loadRequiredRecords()));if(isPromise(e)){a.setInitialLoading(true);n.notify();r.notify();return Promise.resolve(e).then((()=>{a.setInitialLoading(false);n.notify();r.notify();t.onInitialLoaded.emit()}))}t.onInitialLoaded.emit()}function initializeLanguage(){const e=a.getLanguage();if(e)return;const t=o.getInitialLanguage();return valueOrPromise(t,(e=>{const t=e||a.getInitialOptions().defaultLanguage;t&&a.setLanguage(t)}))}function checkCorrectConfiguration(){const e=o.getLanguageDetector()||o.getLanguageStorage();if(e){const e=a.getAvailableLanguages();if(!e)throw new Error(missingOptionError("availableLanguages"))}if(!a.getLanguage()&&!a.getInitialOptions().defaultLanguage)throw new Error(missingOptionError(["defaultLanguage","language"]))}const c=Object.freeze(Object.assign(Object.assign(Object.assign(Object.assign(Object.assign({},t),a),o),i),{init:init,getTranslation:getTranslation,changeTranslation:changeTranslation,getTranslationNs:getTranslationNs,getDefaultAndFallbackNs:getDefaultAndFallbackNs,findPositions:o.findPositions,getRequiredRecords:getRequiredRecords,async changeLanguage(e){if(a.getPendingLanguage()!==e||a.getLanguage()!==e){a.setPendingLanguage(e);a.isRunning()&&await loadRequiredRecords(e);if(e===a.getPendingLanguage()){a.setLanguage(e);await o.setStoredLanguage(e)}}},async addActiveNs(e,t){t||a.addActiveNs(e);a.isRunning()&&await loadRequiredRecords(void 0,e)},loadRecords(e){return i.loadRecords(e,c.isDev())},async loadRecord(e){return(await c.loadRecords([e]))[0]},isLoading(e){return i.isLoading(a.getLanguage(),e)},isLoaded(e){const t=a.getLanguage();if(!t)return false;const n=a.getFallbackLangs(t);const r=getRequiredNamespaces(e);const o=[];n.forEach((e=>{r.forEach((t=>{i.exists({language:e,namespace:t})||o.push({language:e,namespace:t})}))}));return o.length===0},t:(...e)=>{const t=getTranslateProps(...e);const n=getTranslation(t);return o.formatTranslation(Object.assign(Object.assign({},t),{translation:n}))},isDev(){return Boolean(a.getInitialOptions().apiKey&&a.getInitialOptions().apiUrl)},run(){checkCorrectConfiguration();if(!a.isRunning()){a.setRunning(true);o.run();s=loadInitial()}return Promise.resolve(s)},stop(){if(a.isRunning()){o.stop();a.setRunning(false)}}}));return c}function createTolgee(e){const t=Controller({options:e});t.isDev()&&t.invalidate();function withRestart(e){const n=t.isRunning();n&&t.stop();e();t.isDev()&&t.invalidate();n&&t.run()}const n=Object.freeze({on:t.on,onNsUpdate:t.onUpdate.listenSome,setEmitterActive:t.setEmitterActive,getLanguage:t.getLanguage,getPendingLanguage:t.getPendingLanguage,changeLanguage:t.changeLanguage,changeTranslation:t.changeTranslation,addActiveNs:t.addActiveNs,removeActiveNs:t.removeActiveNs,loadRecords:t.loadRecords,loadRecord:t.loadRecord,addStaticData:t.addStaticData,getRecord:t.getRecord,getAllRecords:t.getAllRecords,
/**
     * @param ns optional list of namespaces that you are interested in
     * @return `true` if there are data that need to be fetched.
     */
isLoaded:t.isLoaded,getRequiredRecords:t.getRequiredRecords,isInitialLoading:t.isInitialLoading,
/**
     * @param ns optional list of namespaces that you are interested in
     * @return `true` if tolgee is loading some translations for the first time.
     */
isLoading:t.isLoading,
/**
     * @param ns optional list of namespaces that you are interested in
     * @return `true` if tolgee is fetching some translations.
     */
isFetching:t.isFetching,isRunning:t.isRunning,run:t.run,stop:t.stop,t:t.t,highlight:t.highlight,findPositions:t.findPositions,getInitialOptions:t.getInitialOptions,isDev:t.isDev,wrap:t.wrap,unwrap:t.unwrap,overrideCredentials(e){withRestart((()=>t.overrideCredentials(e)))},addPlugin(e){e&&withRestart((()=>t.addPlugin(n,e)))},updateOptions(e){e&&withRestart((()=>t.init(e)))}});return n}const TolgeeCore=()=>{const e={plugins:[],options:{}};const t=Object.freeze({use(n){e.plugins.push(n);return t},updateDefaults(n){e.options=combineOptions(e.options,n);return t},init(t){const n=createTolgee(combineOptions(e.options,t));e.plugins.forEach(n.addPlugin);return n}});return t};const o=0,i=1,s=2;class FormatError extends Error{constructor(e,t,n){let r;r=e===o?"Empty parameter":e===i?"Unexpected character":"Unexpected end";super(`Tolgee parser: ${r} at ${t} in "${n}"`);this.code=e;this.index=t}}function isWhitespace(e){return/\s/.test(e)}const c=0,l=1,u=2,d=3,f=4;const m=new Set([u,l,c]);const b="'";const y=new Set(["{","}",b]);const isAllowedInParam=e=>/[0-9a-zA-Z_]/.test(e);function formatParser(e){let t=c;let n="";let r="";let a="";const E=[];const L=[];let A=0;function parsingError(t){throw new FormatError(t,A,e)}const addText=()=>{E.push(n);n=""};const addParamChar=()=>{isAllowedInParam(a)||parsingError(i);r+=a};const addParam=()=>{r===""&&parsingError(o);L.push(r);r=""};for(A=0;A<e.length;A++){a=e[A];switch(t){case c:if(a===b){n+=a;t=l}else if(a==="{"){addText();t=d}else{n+=a;t=c}break;case l:if(y.has(a)){n=n.slice(0,-1)+a;t=u}else{n+=a;t=c}break;case u:if(a===b)t=c;else{n+=a;t=u}break;case d:if(a==="}"){addParam();t=c}else if(isWhitespace(a)){if(r!==""){addParam();t=f}}else{addParamChar();t=d}break;case f:a=="}"?t=c:isWhitespace(a)?t=f:parsingError(i)}}m.has(t)||parsingError(s);addText();return[E,L]}function formatter(e,t){const[n,r]=formatParser(e);const a=[n[0]];for(let o=1;o<n.length;o++){const i=t===null||t===void 0?void 0:t[r[o-1]];if(i===void 0)throw new Error(`Missing parameter "${r[o-1]}" in "${e}"`);a.push(String(i));a.push(n[o])}return a.join("")}function createFormatSimple(){return{format:({translation:e,params:t})=>formatter(e,t)}}const FormatSimple=()=>(e,t)=>{t.setFinalFormatter(createFormatSimple());return e};const E="__tolgee_dev_tools";const L="__tolgee_preferredLanguages";const A="data-tolgee-key-only";const k="data-tolgee-restricted";const O="_tolgee";const N="_tolgee-highlighter";function isSSR(){var e,t;return typeof((t=(e=globalThis.window)==null?void 0:e.document)==null?void 0:t.createElement)==="undefined"}function throwIfSSR(e){if(isSSR())throw new Error(`${e}: Can't run on the server`)}function DomHelper(e){function getParentElement(e){return e.parentElement?e.parentElement:e.ownerElement&&e.ownerElement||void 0}const t=Object.freeze({getSuitableParent(n){const r=getParentElement(n);if(r===void 0){console.error(n);throw new Error("No suitable parent found for node above.")}if(!e.passToParent)return r;if(Array.isArray(e.passToParent)){const tagNameEquals=e=>r.tagName.toLowerCase()===e.toLowerCase();if(e.passToParent.findIndex(tagNameEquals)===-1)return r}return typeof e.passToParent!=="function"||e.passToParent(r)?t.getSuitableParent(r):r}});return t}function initElementMeta(e){return{element:e,nodes:new Map}}function initNodeMeta(e,t){return{oldTextContent:e,keys:t}}function getNodeText(e){return e.textContent}function setNodeText(e,t){e.textContent=t}function compareDescriptors(e,t){var n;const r=e.key===void 0||t.key===void 0||t.key===e.key;const a=e.ns===void 0||t.ns===void 0||((n=e.ns)==null?void 0:n.findIndex((e=>{var n;return(n=t.ns)==null?void 0:n.includes(e)})))!==-1;return r&&a}function elementClickable(e){while(e){if(e.getAttribute("disabled")!==null)return false;e=e.parentElement}return true}const T={position:"fixed",boxSizing:"content-box",zIndex:String(Number.MAX_SAFE_INTEGER),contain:"layout",display:"block",borderStyle:"solid",borderRadius:"4px"};function ElementHighlighter({highlightColor:e,highlightWidth:t}){function initHighlightFunction(n,r){r.highlight=()=>{if(!n.isConnected)return;const a=elementClickable(n);let o=r.highlightEl;if(!o){o=document.createElement("div");o.classList.add(N);Object.entries(T).forEach((([e,t])=>{o.style[e]=t}));o.style.borderColor=e;r.highlightEl=o;document.body.appendChild(o)}const i=n.getBoundingClientRect();o.style.pointerEvents=a?"none":"auto";o.style.borderWidth=t+"px";o.style.top=i.top-t+"px";o.style.left=i.left-t+"px";o.style.width=i.width+"px";o.style.height=i.height+"px"}}function initUnhighlightFunction(e,t){t.unhighlight=()=>{var e;(e=t.highlightEl)==null?void 0:e.remove();t.highlightEl=void 0}}return Object.freeze({initHighlighter(e,t){initHighlightFunction(e,t);initUnhighlightFunction(e,t)}})}const R={capture:true};const S={capture:true,passive:true};const C=new Map([["Control","ctrlKey"],["Alt","altKey"],["Meta","metaKey"],["Shift","shiftKey"]]);function MouseEventHandler({highlightKeys:e,elementStore:t,onClick:n,options:r}){var a,o;const i=new Set;let s;let c;let l=[];const u=((a=r.targetElement)==null?void 0:a.getRootNode())||document;const d=((o=r.targetElement)==null?void 0:o.ownerDocument)||document;function highlight(e){var n;if(s!==e){unhighlight();const r=t.get(e);if(r){r.preventClean=true;(n=r.highlight)==null?void 0:n.call(r);s=e}}}function unhighlight(){var e;const n=t.get(s);if(n){n.preventClean=false;(e=n.unhighlight)==null?void 0:e.call(n);s=void 0}}function updateHighlight(){const e=c;let t;if(e&&areKeysDown()){const n=u.elementsFromPoint(e.x,e.y)||[];t=getClosestTolgeeElement(n)}highlight(t)}function updateCursorPosition(e){c=e;updateHighlight()}function updateModifiers(e){for(const[t,n]of C.entries())i.has(t)&&!e[n]?i.delete(t):!i.has(t)&&e[n]&&i.add(t)}function blockEvents(e){updateModifiers(e);if(areKeysDown()&&!isInUiDialog(e.target)){e.stopPropagation();e.preventDefault()}}function onMouseMove(e){updateModifiers(e);updateCursorPosition({x:e.clientX,y:e.clientY})}function onKeyDown(e){updateModifiers(e);updateHighlight()}function onKeyUp(e){updateModifiers(e);updateHighlight()}function onScroll(){var e;const n=t.get(s);(e=n==null?void 0:n.highlight)==null?void 0:e.call(n)}function handleClick(e){blockEvents(e);updateModifiers(e);updateCursorPosition({x:e.clientX,y:e.clientY});if(areKeysDown()&&s){n(s);unhighlight()}}function subscribe(e,t,n){d.addEventListener(e,t,n);l.push([e,t,n])}function initEventListeners(){subscribe("keydown",onKeyDown,R);subscribe("keyup",onKeyUp,R);subscribe("mousemove",onMouseMove,S);subscribe("scroll",onScroll,S);subscribe("click",handleClick,R);subscribe("mouseenter",blockEvents,R);subscribe("mouseover",blockEvents,R);subscribe("mouseout",blockEvents,R);subscribe("mouseleave",blockEvents,R);subscribe("mousedown",blockEvents,R);subscribe("mouseup",blockEvents,R)}function removeEventListeners(){for(const e of l)d.removeEventListener(...e);l=[]}function isInUiDialog(e){return Boolean(findAncestor(e,(e=>e.id===E)))}function getClosestTolgeeElement(e){for(const n of e){const e=findAncestor(n,(e=>t.get(e)));if(e!==void 0)return e||void 0}}function findAncestor(e,t){return e.id===E?null:t(e)?e:(e==null?void 0:e.parentElement)?findAncestor(e.parentElement,t):void 0}function areKeysDown(){for(const t of e)if(!i.has(t))return false;return true}return Object.freeze({stop(){removeEventListeners()},run(){initEventListeners()}})}function ElementRegistry(e,t,n){const r=ElementHighlighter({highlightColor:e.highlightColor,highlightWidth:e.highlightWidth});const a=MouseEventHandler({highlightKeys:e.highlightKeys,elementStore:t,onClick(e){const r=t.get(e);n({target:e,keysAndDefaults:getKeysAndDefaults(r)})},options:e});function isRestricted(t){const n=e.restrictedElements;return n.indexOf(t.tagName.toLowerCase())!==-1||t.closest(`[${k}]`)!==null}function cleanElementInactiveNodes(e,t){for(const[n]of e.nodes)t.has(n)&&e.nodes.delete(n)}function cleanElement(e,n){var r;n.highlightEl&&((r=n.unhighlight)==null?void 0:r.call(n));e.removeAttribute(O);t.remove(e)}function getKeyOptions(e){const t=Array.from(e.nodes.values());return t.reduce(((e,t)=>[...e,...t.keys.map((e=>({key:e.key,defaultValue:e.defaultValue,ns:e.ns})))]),[])}function getKeysAndDefaults(e){return getKeyOptions(e)}return Object.freeze({isRestricted:isRestricted,register(e,n,a){if(isRestricted(e))return;const o=e;let i=t.get(o);if(!i){i=initElementMeta(o);t.set(o,i);o.setAttribute(O,"true")}i.nodes.set(n,a);r.initHighlighter(o,i)},forEachElement:t.forEachElement,cleanupLingeringKeyAttributes(){t.forEachElement(((e,t)=>{if(!t.preventClean){for(const[e]of t.nodes)if(e.nodeType===Node.ATTRIBUTE_NODE){const n=e;n.name===A&&n.ownerElement===null&&t.nodes.delete(n)}t.nodes.size===0&&cleanElement(e,t)}}))},cleanupRemovedNodes(e){t.forEachElement(((t,n)=>{if(!n.preventClean){e.has(t)||cleanElementInactiveNodes(n,e);(e.has(t)||n.nodes.size===0)&&cleanElement(t,n)}}))},findAll(e,n){const r=[];t.forEachElement(((t,a)=>{for(const t of a.nodes.values()){const o=t.keys.find((t=>compareDescriptors({key:e,ns:getFallback(n)},{key:t.key,ns:getFallback(t.ns)})));if(o){r.push(a);break}}}));return r},run(e){e&&a.run()},stop(){a.stop();t.forEachElement(((e,t)=>{var n;t.highlightEl&&((n=t.unhighlight)==null?void 0:n.call(t))}))}})}function ElementStore(){const e=new Map;return Object.freeze({set(t,n){e.set(t,n)},get(t){return t&&e.get(t)},remove(t){return e.delete(t)},forEachElement(t){e.forEach(((e,n)=>t(n,e)))}})}function NodeHandler(e,t){const n=Object.freeze({handleAttributes(n,r=true){const a=[];const o=Object.fromEntries(Object.entries(e.tagAttributes).map((([e,t])=>[e.toUpperCase(),t])));if(n.nodeType===Node.ELEMENT_NODE){const e=n;let r=o[e.tagName.toUpperCase()]??[];"*"in o&&(r=r.concat(o["*"]));a.push(...r.filter((t=>e.hasAttribute(t))).map((t=>e.getAttributeNode(t))).filter((e=>t.testAttribute(e))))}if(r){const e=document.createTreeWalker(n,NodeFilter.SHOW_ELEMENT,(e=>{var t,n;return((t=o[e.tagName.toUpperCase()])==null?void 0:t.some((t=>e.hasAttribute(t))))||((n=o["*"])==null?void 0:n.some((t=>e.hasAttribute(t))))?NodeFilter.FILTER_ACCEPT:NodeFilter.FILTER_SKIP}));while(e.nextNode()){const n=e.currentNode;let r=o[n.tagName.toUpperCase()]??[];"*"in o&&(r=r.concat(o["*"]));a.push(...r.filter((e=>n.hasAttribute(e))).map((e=>n.getAttributeNode(e))).filter((e=>t.testAttribute(e))))}}return a},handleChildList(e){const t=[];t.push(...e.flatMap((e=>n.handleAttributes(e,true))));t.push(...e.flatMap((e=>n.handleText(e))));return t},handleText(e){if(e.nodeType===Node.TEXT_NODE)return t.testTextNode(e)?[e]:[];const n=[];const r=document.createTreeWalker(e,NodeFilter.SHOW_TEXT,(e=>t.testTextNode(e)?NodeFilter.FILTER_ACCEPT:NodeFilter.FILTER_SKIP));while(r.nextNode())n.push(r.currentNode);return n}});return n}function GeneralObserver(){let e=false;let t;const n=ElementStore();function createRunningInstance({mouseHighlight:t,options:r,wrapper:a,onClick:o}){if(isSSR())return{stop(){e=false},wrapper:a};const i=DomHelper(r);const s=NodeHandler(r,a);const c=ElementRegistry(r,n,o);function handleNodes(e){for(const t of e){const e=t.parentElement;if(e&&c.isRestricted(e))continue;const n=getNodeText(t);const r=n?a.unwrap(n):null;if(r){const{text:e,keys:a}=r;setNodeText(t,e);const o=initNodeMeta(n,a);const s=i.getSuitableParent(t);c.register(s,t,o)}}}function handleKeyAttributeAttr(e){const t=i.getSuitableParent(e);c.register(t,e,{oldTextContent:"",keys:[{key:getNodeText(e)}],keyAttributeOnly:true})}function handleKeyAttribute(e,t){if(e.nodeType===Node.ATTRIBUTE_NODE){const t=e;if(t.name===A){handleKeyAttributeAttr(t);return}}if(e.nodeType===Node.ELEMENT_NODE){const t=e;const n=t.getAttributeNode(A);n&&handleKeyAttributeAttr(n)}if(!t)return;const n=document.createTreeWalker(e,NodeFilter.SHOW_ELEMENT,(e=>e.hasAttribute(A)?NodeFilter.FILTER_ACCEPT:NodeFilter.FILTER_SKIP));while(n.nextNode()){const e=n.currentNode.getAttributeNode(A);handleKeyAttributeAttr(e)}}const l=new MutationObserver((t=>{if(!e)return;const n=t.filter((e=>e.type==="childList")).flatMap((e=>Array.from(e.removedNodes)));const r=new Set(n);for(const e of n){if(e.nodeType===Node.ELEMENT_NODE)for(let t=0;t<e.attributes.length;t++)r.add(e.attributes[t]);const t=document.createTreeWalker(e,NodeFilter.SHOW_ELEMENT|NodeFilter.SHOW_TEXT);while(t.nextNode()){const e=t.currentNode;if(e.nodeType===Node.ELEMENT_NODE){const t=e;for(let e=0;e<t.attributes.length;e++)r.add(t.attributes[e])}r.add(e)}}r.size>0&&c.cleanupRemovedNodes(r);t.some((e=>e.type==="attributes"&&e.attributeName===A))&&c.cleanupLingeringKeyAttributes();const a=new Set;for(const e of t)switch(e.type){case"characterData":s.handleText(e.target).forEach((e=>a.add(e)));break;case"childList":handleKeyAttribute(e.target,true);e.addedNodes.length>0&&s.handleChildList(Array.from(e.addedNodes)).forEach((e=>a.add(e)));e.removedNodes.length>0&&s.handleChildList(Array.from(e.removedNodes)).forEach((e=>a.delete(e)));break;case"attributes":e.attributeName===A&&handleKeyAttribute(e.target,false);s.handleAttributes(e.target,false).forEach((e=>a.add(e)));break}handleNodes([...a])}));const u=r.targetElement||document.body;e=true;c.run(t);handleKeyAttribute(u,true);handleNodes(s.handleChildList([u]));const d=new Set;d.add(A);Object.values(r.tagAttributes).forEach((e=>e.forEach((e=>d.add(e.toLowerCase())))));l.observe(u,{attributes:true,attributeFilter:[...d],childList:true,subtree:true,characterData:true});return{stop(){e=false;c.stop();l.disconnect()},elementRegistry:c,wrapper:a}}const r=Object.freeze({run(e){t=createRunningInstance(e)},stop(){t==null?void 0:t.stop()},forEachElement(e){var n,r;(r=(n=t==null?void 0:t.elementRegistry)==null?void 0:n.forEachElement)==null?void 0:r.call(n,e)},highlight(e,n){var r;const a=((r=t==null?void 0:t.elementRegistry)==null?void 0:r.findAll(e,n))||[];a.forEach((e=>{var t;return(t=e.highlight)==null?void 0:t.call(e)}));return{unhighlight(){a.forEach((e=>{var t;return(t=e.unhighlight)==null?void 0:t.call(e)}))}}},findPositions(e,n){var r;const a=((r=t==null?void 0:t.elementRegistry)==null?void 0:r.findAll(e,n))||[];const o=[];a.sort(((e,t)=>e.element.compareDocumentPosition(t.element)&Node.DOCUMENT_POSITION_FOLLOWING?-1:1));a.forEach((t=>{const r=t.element.getBoundingClientRect();t.nodes.forEach((t=>{t.keys.forEach((t=>{compareDescriptors({key:e,ns:getFallback(n)},{key:t.key,ns:getFallback(t.ns)})&&o.push({position:{x:r.x,y:r.y,width:r.width,height:r.height},keyName:t.key,keyNamespace:t.ns||""})}))}))}));return o},unwrap(e){return t?t.wrapper.unwrap(e):{text:e,keys:[]}},wrap(e){return t?t.wrapper.wrap(e):e.translation||""}});return r}var P=typeof globalThis!=="undefined"?globalThis:typeof window!=="undefined"?window:typeof global!=="undefined"?global:typeof self!=="undefined"?self:{};var j={};(function(e){function B(e,t){var n;return n=e instanceof Buffer?e:Buffer.from(e.buffer,e.byteOffset,e.byteLength),n.toString(t)}var w=function(e){return Buffer.from(e)};function h(e){for(var t=0,n=Math.min(65536,e.length+1),r=new Uint16Array(n),a=[],o=0;;){var i=t<e.length;if(!i||o>=n-1){var s=r.subarray(0,o),c=s;if(a.push(String.fromCharCode.apply(null,c)),!i)return a.join("");e=e.subarray(t),t=0,o=0}var l=e[t++];if((l&128)===0)r[o++]=l;else if((l&224)===192){var u=e[t++]&63;r[o++]=(l&31)<<6|u}else if((l&240)===224){u=e[t++]&63;var d=e[t++]&63;r[o++]=(l&31)<<12|u<<6|d}else if((l&248)===240){u=e[t++]&63,d=e[t++]&63;var f=e[t++]&63,m=(l&7)<<18|u<<12|d<<6|f;m>65535&&(m-=65536,r[o++]=m>>>10&1023|55296,m=56320|m&1023),r[o++]=m}}}function F(e){for(var t=0,n=e.length,r=0,a=Math.max(32,n+(n>>>1)+7),o=new Uint8Array(a>>>3<<3);t<n;){var i=e.charCodeAt(t++);if(i>=55296&&i<=56319){if(t<n){var s=e.charCodeAt(t);(s&64512)===56320&&(++t,i=((i&1023)<<10)+(s&1023)+65536)}if(i>=55296&&i<=56319)continue}if(r+4>o.length){a+=8,a*=1+t/e.length*2,a=a>>>3<<3;var c=new Uint8Array(a);c.set(o),o=c}if((i&4294967168)!==0){if((i&4294965248)===0)o[r++]=i>>>6&31|192;else if((i&4294901760)===0)o[r++]=i>>>12&15|224,o[r++]=i>>>6&63|128;else{if((i&4292870144)!==0)continue;o[r++]=i>>>18&7|240,o[r++]=i>>>12&63|128,o[r++]=i>>>6&63|128}o[r++]=i&63|128}else o[r++]=i}return o.slice?o.slice(0,r):o.subarray(0,r)}var t="Failed to ",p=function(e,n,r){if(e)throw new Error("".concat(t).concat(n,": the '").concat(r,"' option is unsupported."))};var n=typeof Buffer=="function"&&Buffer.from;var r=n?w:F;function v(){this.encoding="utf-8"}v.prototype.encode=function(e,t){return p(t&&t.stream,"encode","stream"),r(e)};function U(e){var t;try{var n=new Blob([e],{type:"text/plain;charset=UTF-8"});t=URL.createObjectURL(n);var r=new XMLHttpRequest;return r.open("GET",t,false),r.send(),r.responseText}finally{t&&URL.revokeObjectURL(t)}}var a=!n&&typeof Blob=="function"&&typeof URL=="function"&&typeof URL.createObjectURL=="function",o=["utf-8","utf8","unicode-1-1-utf-8"],i=h;n?i=B:a&&(i=function(e){try{return U(e)}catch(t){return h(e)}});var s="construct 'TextDecoder'",c="".concat(t," ").concat(s,": the ");function g(e,t){p(t&&t.fatal,s,"fatal"),e=e||"utf-8";var r;if(r=n?Buffer.isEncoding(e):o.indexOf(e.toLowerCase())!==-1,!r)throw new RangeError("".concat(c," encoding label provided ('").concat(e,"') is invalid."));this.encoding=e,this.fatal=false,this.ignoreBOM=false}g.prototype.decode=function(e,t){p(t&&t.stream,"decode","stream");var n;return n=e instanceof Uint8Array?e:e.buffer instanceof ArrayBuffer?new Uint8Array(e.buffer):new Uint8Array(e),i(n,this.encoding)};e.TextEncoder=e.TextEncoder||v;e.TextDecoder=e.TextDecoder||g})(typeof window!=="undefined"?window:(typeof P!=="undefined",P));const D=_mergeNamespaces({__proto__:null,default:j},[j]);(e=console.assert)==null?void 0:e.call(console,D);const x=["‌","‍"];const I=RegExp(`([${x.join("")}]{9})+`,"gu");function toBytes(e){return Array.from((new TextEncoder).encode(e))}function fromBytes(e){return(new TextDecoder).decode(new Uint8Array(e))}function padToWholeBytes(e){const t=8-e.length;return"0".repeat(t)+e}function encodeMessage(e){const t=toBytes(e).map(Number);const n=t.map((e=>padToWholeBytes(e.toString(2))+"0")).join("");const r=Array.from(n).map((e=>x[Number(e)])).join("");return r}function decodeMessage(e){const t=Array.from(e).map((e=>x.indexOf(e))).map(String).join("");const n=t.match(/(.{9})/g);const r=Uint8Array.from((n==null?void 0:n.map((e=>parseInt(e.slice(0,8),2))))||[]);return fromBytes(r)}function decodeFromText(e){var t;const n=(t=e.match(I))==null?void 0:t.filter((e=>e.length>8));return(n==null?void 0:n.map(decodeMessage))||[]}function removeSecrets(e){return e.replace(I,"")}function stringToCodePoints(e){const t=[];for(const n of e)t.push(n.codePointAt(0));return t}function ValueMemory(){const e=[];return Object.freeze({valueToNumber(t){let n=e.indexOf(t);if(n===-1){n=e.length;e.push(t)}return n},numberToValue(t){return e[t]}})}function InvisibleWrapper({fullKeyEncode:e}){const t=ValueMemory();function encodeValue(e){const t={k:e.key,n:e.ns||void 0,d:e.defaultValue};return JSON.stringify(t)}function decodeValue(e){try{return JSON.parse(e||"{}")}catch(e){console.error(e);return}}function getMessage(e){if(e.length<=4){const[n]=stringToCodePoints(e);return t.numberToValue(n)}return e}return Object.freeze({unwrap(e){const t=[];const n=decodeFromText(e);n.forEach((e=>{const n=getMessage(e);const r=decodeValue(n);if(r){const{k:e,d:n,n:a}=r;t.push({key:e,defaultValue:n,ns:a})}}));const r=removeSecrets(e);return{text:r,keys:t}},wrap({key:n,defaultValue:r,translation:a,ns:o}){let i;if(e){const e=encodeValue({key:n,ns:o});i=encodeMessage(e)}else{const e=encodeValue({key:n,ns:o,defaultValue:r});const a=t.valueToNumber(e);i=encodeMessage(String.fromCodePoint(a))}const s=a||"";return typeof s==="string"?s+i:s},testTextNode(e){var t,n;return(((t=e.textContent)==null?void 0:t.includes(`${x[0]}${x[0]}`))||((n=e.textContent)==null?void 0:n.includes(`${x[1]}${x[0]}`)))??false},testAttribute(e){return e.value.includes(`${x[0]}${x[0]}`)||e.value.includes(`${x[1]}${x[0]}`)}})}const InvisibleObserver=()=>()=>{const e=GeneralObserver();const t=Object.freeze({...e,run(t){const n=InvisibleWrapper({fullKeyEncode:t.options.fullKeyEncode});e.run({...t,wrapper:n})},retranslate(){},outputNotFormattable:false});return t};function isCharEscaped(e,t){let n=0;while(e>-1&&t[e-1]==="\\"){n++;e--}return n%2==1}function TextWrapper({inputPrefix:e,inputSuffix:t,translate:n}){function getRawUnWrapRegex(){const n=escapeForRegExp(e);const r=escapeForRegExp(t);return`(\\\\?)(${n}(.*?)${r})`}function parseUnwrapped(e){let t=false;let n="";let r="";let a="KEY";const o={key:"",ns:void 0,params:{},defaultValue:void 0};const addNamespace=e=>{o.ns=e};for(const i of e)if(i!=="\\"||t)if(t){t=false;n+=i}else if(a!=="KEY"||i!==",")if(a!=="KEY"||i!=="|")if(a!=="NAMESPACE"||i!==",")if(a!=="KEY"||i!==":")if(a!=="DEFAULT_VALUE"||i!==":")if(a!=="PARAM_NAME"||i!==":")if(a!=="PARAM_VALUE"||i!==",")n+=i;else{a="PARAM_NAME";o.params[r]=n;n=""}else{a="PARAM_VALUE";r=n;n=""}else{a="PARAM_NAME";o.defaultValue=n;n=""}else{a="PARAM_NAME";o.key=n;n=""}else{a="DEFAULT_VALUE";addNamespace(n);n=""}else{a="NAMESPACE";o.key=n;n=""}else{a="DEFAULT_VALUE";o.key=n;n=""}else t=true;a==="KEY"&&(o.key=n);a==="DEFAULT_VALUE"&&(o.defaultValue=n);a==="PARAM_VALUE"&&(o.params[r]=n);a==="NAMESPACE"&&addNamespace(n);return o}function getTranslatedWithMetadata(e){const{key:t,params:r,defaultValue:a,ns:o}=parseUnwrapped(e);const i=n({key:t,params:r,defaultValue:a,ns:o,noWrap:true});return{translated:i,key:t,params:r,defaultValue:a,ns:o}}function escapeForRegExp(e){return e.replace(/[.*+?^${}()|[\]\\]/g,"\\$&")}function escapeParam(e){if(typeof e==="string")return e.replace(/[,:|\\]/gs,"\\$&");if(typeof e==="number"||typeof e==="bigint")return e.toString();console.warn(`Parameters of type "${typeof e}" are not supported in "text" wrapper mode.`);return e}return Object.freeze({wrap({key:n,params:r,defaultValue:a,ns:o}){let i=Object.entries(r||{}).map((([e,t])=>`${escapeParam(e)}:${escapeParam(t)}`)).join(",");i=i.length?`:${i}`:"";const s=a!==void 0?`,${escapeParam(a)}`:"";const c=typeof o==="string"?[o]:o;const l=(c==null?void 0:c.length)?`|${c.map((e=>escapeParam(e))).join("|")}`:"";return`${e}${escapeParam(n)}${l}${s}${i}${t}`},unwrap(e){const t=new RegExp(getRawUnWrapRegex(),"gs");const n=[];let r=false;let a;let o=0;let i="";while((a=t.exec(e))!==null){let t=a[1];const[s,c,l,u]=a;const{index:d,input:f}=a;i+=f.substr(o,d-o);o=d+s.length;if(t==="\\"){if(!isCharEscaped(d,e)){i+=l;continue}t=""}const m=getTranslatedWithMetadata(u);n.push({key:m.key,params:m.params,defaultValue:m.defaultValue,ns:m.ns});r=true;i+=t+m.translated}i+=e.substring(o);return r?{text:i,keys:n}:{text:e,keys:[]}},testTextNode(n){var r,a;return(((r=n.textContent)==null?void 0:r.includes(e))&&((a=n.textContent)==null?void 0:a.includes(t)))??false},testAttribute(n){return n.value.includes(e)&&n.value.includes(t)}})}const TextObserver=()=>()=>{const e=GeneralObserver();const t=Object.freeze({...e,run(t){const n=TextWrapper({inputPrefix:t.options.inputPrefix,inputSuffix:t.options.inputSuffix,translate:t.translate});e.run({...t,wrapper:n})},retranslate(){e.forEachElement(((t,n)=>{for(const[t,r]of n.nodes.entries()){if(r.keyAttributeOnly)return;const n=e.unwrap(r.oldTextContent);n&&setNodeText(t,n.text)}}))},outputNotFormattable:true});return t};const ObserverPlugin=()=>(e,t)=>{e.getInitialOptions().observerType==="text"?t.setObserver(TextObserver()):t.setObserver(InvisibleObserver());return e};const M="ABCDEFGHIJKLMNOPQRSTUVWXYZ234567";function readChar(e){const t=M.indexOf(e);if(t===-1)throw new Error("Invalid character found: "+e);return t}function arrayBufferToString(e){const t=new Uint8Array(e);const n=t.length;let r="";let a=Math.pow(2,16)-1;for(let e=0;e<n;e+=a){e+a>n&&(a=n-e);r+=String.fromCharCode.apply(null,t.subarray(e,e+a))}return r}function base32Decode(e){e=e.toUpperCase();const t=e.length;let n=0;let r=0;let a=0;const o=new Uint8Array(t*5/8|0);for(let i=0;i<t;i++){r=r<<5|readChar(e[i]);n+=5;if(n>=8){o[a++]=r>>>n-8&255;n-=8}}return arrayBufferToString(o.buffer)}function getProjectIdFromApiKey(e){if(e)try{const[t,n]=e.split("_");if(t==="tgpak"){const[e]=base32Decode(n).split("_");return Number(e)}}catch{console.warn("Tolgee: Api key can't be parsed")}}function getApiKeyType(e){if(!e)return;const[t]=e.split("_");return t==="tgpak"?"tgpak":t==="tgpat"?"tgpat":"legacy"}function createDevBackend(){return{getRecord({apiUrl:e,apiKey:t,language:n,namespace:r,projectId:a,fetch:o}){const i=getProjectIdFromApiKey(t)??a;let s=i!==void 0?`${e}/v2/projects/${i}/translations/${n}`:`${e}/v2/projects/translations/${n}`;r&&(s+=`?ns=${r}`);if(getApiKeyType(t)==="tgpat"&&a===void 0)throw new Error("You need to specify 'projectId' when using PAT key");return o(s,{headers:{"X-API-Key":t||"","Content-Type":"application/json"}}).then((e=>{if(e.ok)return e.json().then((e=>e[n]));throw new Error(e.statusText)}))}}}const DevBackend=()=>(e,t)=>{t.setDevBackend(createDevBackend());return e};function listen(e,t){const handler=n=>{var r,a;e.includes((r=n.data)==null?void 0:r.type)&&t((a=n.data)==null?void 0:a.data)};window.addEventListener("message",handler,false);return{unsubscribe(){window.removeEventListener("message",handler)}}}function sendAndRecieve({message:e,recievingMessage:t,data:n,attempts:r=1,timeout:a=300}){let o=false;const makeAttempt=()=>new Promise(((r,o)=>{const i=listen(t,handler);window.postMessage({type:e,data:n},window.origin);const s=setTimeout(expire,a);function handler(e){clearTimeout(s);removeEventListener();r(e)}function removeEventListener(){i.unsubscribe()}function expire(){removeEventListener();o()}}));const getData=async()=>{for(let e=0;e<r;e++){if(o)return new Promise((()=>{}));try{const e=await makeAttempt();return e}catch(e){continue}}if(!o)throw`Didn't recieve ${t.join(" or ")} in time.`;return new Promise((()=>{}))};return{cancel(){o=true},promise:getData()}}function Handshaker(){let e;async function update(t){e==null?void 0:e();const{cancel:n,promise:r}=sendAndRecieve({message:"TOLGEE_READY",recievingMessage:["TOLGEE_PLUGIN_READY","TOLGEE_PLUGIN_UPDATED"],data:t,attempts:4});e=n;return r}return{update:update}}const _="tolgee-in-context-tools.umd.min.js";const K="@tolgee/in-context-tools";const $="InContextTools";const V="https://cdn.jsdelivr.net/npm";function injectScript(e){return new Promise(((t,n)=>{const r=document.createElement("script");r.src=e;r.addEventListener("load",(()=>t()));r.addEventListener("error",(e=>n(e.error)));document.head.appendChild(r)}))}let z=null;function loadInContextLib(e){z||(z=injectScript(`${V}/@tolgee/web@${e}/dist/${_}`).then((()=>window[K][$])));return z}const W="__tolgee_apiKey";const H="__tolgee_apiUrl";function getCredentials(){const e=sessionStorage.getItem(W)||void 0;const t=sessionStorage.getItem(H)||void 0;if(e&&t)return{apiKey:e,apiUrl:t}}function clearSessionStorage(){sessionStorage.removeItem(W);sessionStorage.removeItem(H)}function onDocumentReady(e){document.readyState!=="loading"?Promise.resolve().then((()=>{e()})):document.addEventListener&&document.addEventListener("DOMContentLoaded",e)}let BrowserExtensionPlugin=()=>e=>e;const sessionStorageAvailable=()=>{if(typeof window==="undefined")return false;try{return typeof sessionStorage!=="undefined"&&sessionStorage}catch(e){console.error("sessionStorage not available",e);return false}};sessionStorageAvailable()&&(BrowserExtensionPlugin=()=>e=>{const t=Handshaker();const getConfig=()=>({uiPresent:true,uiVersion:void 0,mode:e.isDev()?"development":"production",config:{apiUrl:e.getInitialOptions().apiUrl||"",apiKey:e.getInitialOptions().apiKey||""}});const getTolgeePlugin=async()=>{const e=await loadInContextLib("5.26.0");return t=>{const n=getCredentials();t.addPlugin(e({credentials:n}));return t}};e.on("running",(({value:e})=>{e&&onDocumentReady((()=>{t.update(getConfig()).catch(clearSessionStorage)}))}));const n=getCredentials();n&&getTolgeePlugin().then((t=>{e.addPlugin(t)})).catch((e=>{console.error("Tolgee: Failed to load in-context tools");console.error(e)}));return e});const q="__tolgee_currentLanguage";function createLanguageStorage(){return{getLanguage(){throwIfSSR("LanguageStorage");const e=localStorage.getItem(q);return e||void 0},setLanguage(e){throwIfSSR("LanguageStorage");localStorage.setItem(q,e)}}}const LanguageStorage=()=>(e,t)=>{t.setLanguageStorage(createLanguageStorage());return e};function createLanguageDetector(){return{getLanguage({availableLanguages:e}){throwIfSSR("LanguageDetector");const t=window.navigator.language;const n=e.find((e=>e===t));if(n)return n;const getTwoLetters=e=>e.replace(/^(.+?)(-.*)?$/,"$1");const r=getTwoLetters(window.navigator.language);const a=e.find((e=>getTwoLetters(e)===r));return a||void 0}}}const LanguageDetector=()=>(e,t)=>{t.setLanguageDetector(createLanguageDetector());return e};function trimSlashes(e){return e.endsWith("/")?e.slice(0,-1):e}const defaultGetPath=({namespace:e,language:t,prefix:n})=>e?`${trimSlashes(n)}/${e}/${t}.json`:`${trimSlashes(n)}/${t}.json`;function defaultGetData(e){return e.json()}const G={prefix:"/i18n",getPath:defaultGetPath,getData:defaultGetData,headers:{Accept:"application/json"}};function createBackendFetch(e){const{prefix:t,getPath:n,getData:r,headers:a,...o}={...G,...e,headers:{...G.headers,...e==null?void 0:e.headers}};return{getRecord({namespace:e,language:i,fetch:s}){const c=n({namespace:e,language:i,prefix:t});return s(c,{headers:a,...o}).then((e=>{if(!e.ok)throw new Error(`${e.url} ${e.status}`);return r(e)}))}}}const BackendFetch=e=>(t,n)=>{n.addBackend(createBackendFetch(e));return t};function Tolgee(){return TolgeeCore().use(BrowserExtensionPlugin())}const DevTools=()=>e=>e;export{BackendFetch,BrowserExtensionPlugin,E as DEVTOOLS_ID,DevBackend,DevTools,FormatSimple,LanguageDetector,LanguageDetectorError,LanguageStorage,LanguageStorageError,ObserverPlugin,L as PREFERRED_LANGUAGES_LOCAL_STORAGE_KEY,RecordFetchError,O as TOLGEE_ATTRIBUTE_NAME,k as TOLGEE_RESTRICT_ATTRIBUTE,A as TOLGEE_WRAPPED_ONLY_DATA_ATTRIBUTE,Tolgee,TolgeeCore,createFetchFunction,getFallback,getFallbackArray,getProjectIdFromApiKey,getTranslateProps};

